<html><head><title>Ocsigen from A to Z</title><meta charset="utf8"/><meta content="width=device-width, initial-scale=1" name="viewport"/><link rel="stylesheet" href="https://ocsigen.org/css/style.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/themes/prism.min.css"/><script type="text/javascript" src="https://ocsigen.org/js/client.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-core.min.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-ocaml.min.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-clike.min.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-reason.min.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-javascript.min.js">
//<![CDATA[

//]]>
</script></head><body class="basics tuto"><div class="project-page"><div class="page-header"><p class="logo-ocsigen"><a href=".././../../" class="ocsimore_phrasing_link"><img src=".././../../img/ocsigen-white.svg" alt="Ocsigen"/></a>
</p><div class="mainmenu"><p class="mainmenu-home"><a href=".././../../" class="ocsimore_phrasing_link">Home</a></p><p class="mainmenu-current mainmenu-doc"><a href=".././../../tuto/" class="ocsimore_phrasing_link">Doc</a></p><p><a href=".././../../eliom/" class="ocsimore_phrasing_link">Eliom</a></p><p><a href=".././../../js_of_ocaml/" class="ocsimore_phrasing_link">Js_of_ocaml</a></p><p><a href=".././../../lwt/" class="ocsimore_phrasing_link">Lwt</a></p><p><a href=".././../../tyxml/" class="ocsimore_phrasing_link">Tyxml</a></p><p><a href=".././../../ocsigen-start/" class="ocsimore_phrasing_link">Start</a></p></div><form id="googlesearch" action="https://google.com/search"><input name="q" id="gsearch-box" placeholder="Search using Google"/><label for="gsearch-box"><img src="/img/search.svg" alt="" id="gsearch-icon"/></label><input type="submit" id="gsearch-submit" onclick="document.getElementById('gsearch-box').value += ' site:ocsigen.org';"/></form><aside class="how-drawer"><input id="how-drawer-toggle" type="checkbox"/><label for="how-drawer-toggle" id="how-drawer-label"><span class="how-drawer-icon"></span></label><nav class="how-drawer-content"><ul class="drawermainmenu"><li class="drawermainmenu-home"><a href=".././../../" class="ocsimore_phrasing_link">Home</a>
</li><li class="drawermainmenu-doc"><a href=".././../../tuto/" class="ocsimore_phrasing_link">Doc</a>
</li><li class="drawermainmenu-project"><a href=".././../../eliom/" class="ocsimore_phrasing_link">Eliom</a>
</li><li class="drawermainmenu-project"><a href=".././../../js_of_ocaml/" class="ocsimore_phrasing_link">Js_of_ocaml</a>
</li><li class="drawermainmenu-project"><a href=".././../../ocsigenserver/" class="ocsimore_phrasing_link">Server</a>
</li><li class="drawermainmenu-project"><a href=".././../../lwt/" class="ocsimore_phrasing_link">Lwt</a>
</li><li class="drawermainmenu-project"><a href=".././../../tyxml/" class="ocsimore_phrasing_link">Tyxml</a>
</li><li class="drawermainmenu-project"><a href=".././../../ocsigen-toolkit/" class="ocsimore_phrasing_link">Toolkit</a>
</li><li class="drawermainmenu-project"><a href=".././../../ocsigen-start/" class="ocsimore_phrasing_link">Start</a>
</li><li class="drawermainmenu-project"><a href=".././../../html_of_wiki/" class="ocsimore_phrasing_link">html_of_wiki</a>
</li><li class="drawermainmenu-project"><a href=".././../../deriving/" class="ocsimore_phrasing_link">deriving</a>
</li><li class="drawermainmenu-project"><a href=".././../../ocsimore/" class="ocsimore_phrasing_link">Ocsimore (<em>deprecated</em>)</a>
</li><li class="drawermainmenu-page"><a href=".././../../projects" class="ocsimore_phrasing_link">Other projects</a>
</li><li class="drawermainmenu-page"><a href=".././../../papers" class="ocsimore_phrasing_link">Research papers</a>
</li><li class="drawermainmenu-page"><a href=".././../../credits" class="ocsimore_phrasing_link">Who does Ocsigen?</a>
</li><li class="drawermainmenu-page"><a href=".././../../contributing" class="ocsimore_phrasing_link">Contributing</a>
</li><li class="drawermainmenu-page"><a href=".././../../blog" class="ocsimore_phrasing_link">Blog</a>
</li><li class="drawermainmenu-page"><a href=".././../../install" class="ocsimore_phrasing_link">Installation</a>
</li><li class="drawermainmenu-page"><a href="https://github.com/ocsigen" class="ocsimore_phrasing_link">Source code</a>
</li></ul><nav class="how-doctree"><h1> Main tutorial</h1><h2><a href="intro" class="ocsimore_phrasing_link">Introduction. Ocsigen: where to start?</a></h2><h2><a href="basics" class="ocsimore_phrasing_link">Ocsigen's cheat sheet: The Basics</a></h2><h2><a href=".././../../install" class="ocsimore_phrasing_link">Install Ocsigen</a></h2><h2><a href="start" class="ocsimore_phrasing_link">Your first app in 5 minutes</a></h2><h2><a href="basicwebsite" class="ocsimore_phrasing_link">A basic Web site in OCaml</a></h2><h2><a href="tutowidgets" class="ocsimore_phrasing_link">Eliom apps basics: writing client-server widgets</a></h2><h2><a href="application" class="ocsimore_phrasing_link">Client/server application: Graffiti</a></h2><h2><a href="how-to-register-session-data" class="ocsimore_phrasing_link">Session data: Eliom references</a></h2><h2><a href="interaction" class="ocsimore_phrasing_link">Service based Web programming</a></h2><h2><a href="tutoreact" class="ocsimore_phrasing_link">Reactive client-server Web applications</a></h2><h2><a href="misc" class="ocsimore_phrasing_link">Mixing traditional Web interaction with client-server app</a></h2><h1> 5-minute tutorials</h1><h2><a href="lwt" class="ocsimore_phrasing_link">Lwt</a></h2><h2><a href="html" class="ocsimore_phrasing_link">HTML</a></h2><h1> Other tutorials: Miscellanous features</h1><h2><a href="mobile" class="ocsimore_phrasing_link">Mobile applications with Ocsigen</a></h2><h2><a href="custom-conf" class="ocsimore_phrasing_link">Custom configuration</a></h2><h2><a href="rest" class="ocsimore_phrasing_link">RESTful JSON API</a></h2><h2><a href="ocsipersist" class="ocsimore_phrasing_link">Persistent tables with Ocsipersist</a></h2><h2><a href="hash-password" class="ocsimore_phrasing_link">Protecting passwords</a></h2><h2><a href="macaque" class="ocsimore_phrasing_link">MaCaQue: SQL queries - Users</a></h2><h1> Improving Graffiti</h1><h2><a href="pictures" class="ocsimore_phrasing_link">Download pictures</a></h2><h2><a href="music" class="ocsimore_phrasing_link">Playing music</a></h2><h2><a href="reactivemediaplayer" class="ocsimore_phrasing_link">Reactive media player</a></h2><h1 class="howto"> HOW-TO</h1><h2> My first steps with Ocsigen</h2><h3><a href="how-to-make-hello-world-in-ocsigen" class="ocsimore_phrasing_link">How to make &quot;hello world&quot; in Ocsigen</a></h3><h3><a href="how-to-compile-my-ocsigen-pages" class="ocsimore_phrasing_link">How to compile my Ocsigen pages</a></h3><h3><a href="how-to-configure-and-launch-the-ocsigen-server" class="ocsimore_phrasing_link">How to configure and launch the Ocsigen Server</a></h3><h3><a href="how-does-a-page-s-source-code-look" class="ocsimore_phrasing_link">How does a client-server app source code look like?</a></h3><h2> How to put some elements in my page ?</h2><h3><a href="how-to-make-page-a-skeleton" class="ocsimore_phrasing_link">How to make a page skeleton</a></h3><h3><a href="how-to-use-get-parameters-or-parameters-in-the-url" class="ocsimore_phrasing_link">How to use GET parameters (parameters in the URL)</a></h3><h3><a href="how-to-add-css-stylesheet" class="ocsimore_phrasing_link">How to add CSS stylesheet</a></h3><h3><a href="how-to-add-a-javascript-script" class="ocsimore_phrasing_link">How to add a Javascript script</a></h3><h3><a href="how-to-add-a-div" class="ocsimore_phrasing_link">How to add a div</a></h3><h3><a href="how-to-add-a-list" class="ocsimore_phrasing_link">How to add lists in pages?</a></h3><h3><a href="how-to-add-an-image" class="ocsimore_phrasing_link">How to add an image</a></h3><h3><a href="how-to-write-titles-and-paragraphs" class="ocsimore_phrasing_link">How to write titles and paragraphs</a></h3><h3><a href="how-to-set-and-id-classes-or-other-attributes-to-html-elements" class="ocsimore_phrasing_link">How to set and id, classes or other attributes to HTML elements</a></h3><h3><a href="how-to-add-a-select-or-other-form-element" class="ocsimore_phrasing_link">How to add select (or other form element)</a></h3><h3><a href="how-to-insert-raw-form-elements-not-belonging-to-a-form-towards-a-service" class="ocsimore_phrasing_link">How to insert &quot;raw&quot; form elements (not belonging to a form towards a service)</a></h3><h3><a href="how-to-make-responsive-css" class="ocsimore_phrasing_link">How to make responsive CSS</a></h3><h2> Services</h2><h3><a href="how-to-do-links-to-other-pages" class="ocsimore_phrasing_link">How to do links to other pages</a></h3><h3><a href="how-to-write-forms" class="ocsimore_phrasing_link">How to write forms</a></h3><h3><a href="how-to-register-a-service-that-decides-itself-what-to-send" class="ocsimore_phrasing_link">How to register a service that decides itself what to send</a></h3><h3><a href="how-to-create-link-to-a-current-page-without-knowing-its-url" class="ocsimore_phrasing_link">How to create link to a current page (without knowing its URL)</a></h3><h3><a href="how-to-create-form-wizard-sequence-of-pages-depending-on-data-entered-on-previous-ones" class="ocsimore_phrasing_link">How to create form wizard (sequence of pages depending on data entered on previous ones)</a></h3><h3><a href="how-to-write-a-json-service" class="ocsimore_phrasing_link">How to write a JSON service</a></h3><h3><a href="how-to-send-file-download" class="ocsimore_phrasing_link">How to send a file (download)</a></h3><h3><a href="how-to-send-file-upload" class="ocsimore_phrasing_link">How to send a file (upload)</a></h3><h2> Js_of_ocaml</h2><h3><a href="how-to-attach-ocaml-values-to-dom-elements" class="ocsimore_phrasing_link">How to attach OCaml values to DOM elements</a></h3><h3><a href="how-to-know-whether-the-browser-window-has-the-focus-or-not" class="ocsimore_phrasing_link">How to know whether the browser window has the focus or not</a></h3><h3><a href="how-to-build-js-object" class="ocsimore_phrasing_link">How to build js object</a></h3><h3><a href="how-to-stop-default-behaviour-of-events" class="ocsimore_phrasing_link">How to stop default behaviour of events</a></h3><h3><a href="how-to-call-an-ocaml-function-from-js-code" class="ocsimore_phrasing_link">How to call an OCaml function from js code</a></h3><h2> Eliom client-server applications</h2><h3><a href="how-to-call-a-server-side-function-from-client-side" class="ocsimore_phrasing_link">How to call a server-side function from the client side</a></h3><h3><a href="how-to-make-the-client-side-program-get-an-html-element-from-the-server-and-insert-it-in-the-page" class="ocsimore_phrasing_link">How to make the client side program get an HTML element from the server and insert it in the page</a></h3><h3><a href="how-to-attach-ocaml-values-to-the-html-nodes-sent-to-the-client" class="ocsimore_phrasing_link">How to attach OCaml values to the HTML nodes sent to the client</a></h3><h3><a href="how-to-iterate-on-all-sessions-for-one-user-or-all-tabs" class="ocsimore_phrasing_link">How to iterate on all sessions for one user, or all tabs</a></h3><h3><a href="how-to-implement-a-notification-system" class="ocsimore_phrasing_link">How to implement a notification system</a></h3><h3><a href="how-to-send-a-file-to-server-without-stopping-the-client-process" class="ocsimore_phrasing_link">How to send a file to server without stopping the client process</a></h3><h3><a href="how-to-detect-channel-disconnection" class="ocsimore_phrasing_link">How to detect channel disconnection</a></h3><h3><a href="how-to-detect-on-client-side-that-the-server-side-state-for-the-process-is-closed" class="ocsimore_phrasing_link">How to detect on client side that the server side state for the process is closed</a></h3><h2> Eliom Server side</h2><h3><a href="how-do-i-create-a-cryptographically-safe-identifier" class="ocsimore_phrasing_link">How do I create a Cryptographically safe identifier</a></h3></nav></nav></aside></div><p class="reasonwarning">Warning: Reason support is experimental.
We are looking for beta-tester and contributors.
</p><button id="reason">Switch to </button><div class="twocols"><nav class="leftcol">Version <select class="how-versions" onchange="location = this.value;"><option value=".././../2.2/manual/basics">2.2</option><option value=".././../6.4/manual/basics">6.4</option><option value=".././../dev/manual/basics" selected="selected">dev</option></select><nav class="how-doctree"><h1> Main tutorial</h1><h2><a href="intro" class="ocsimore_phrasing_link">Introduction. Ocsigen: where to start?</a></h2><h2><a href="basics" class="ocsimore_phrasing_link">Ocsigen's cheat sheet: The Basics</a></h2><h2><a href=".././../../install" class="ocsimore_phrasing_link">Install Ocsigen</a></h2><h2><a href="start" class="ocsimore_phrasing_link">Your first app in 5 minutes</a></h2><h2><a href="basicwebsite" class="ocsimore_phrasing_link">A basic Web site in OCaml</a></h2><h2><a href="tutowidgets" class="ocsimore_phrasing_link">Eliom apps basics: writing client-server widgets</a></h2><h2><a href="application" class="ocsimore_phrasing_link">Client/server application: Graffiti</a></h2><h2><a href="how-to-register-session-data" class="ocsimore_phrasing_link">Session data: Eliom references</a></h2><h2><a href="interaction" class="ocsimore_phrasing_link">Service based Web programming</a></h2><h2><a href="tutoreact" class="ocsimore_phrasing_link">Reactive client-server Web applications</a></h2><h2><a href="misc" class="ocsimore_phrasing_link">Mixing traditional Web interaction with client-server app</a></h2><h1> 5-minute tutorials</h1><h2><a href="lwt" class="ocsimore_phrasing_link">Lwt</a></h2><h2><a href="html" class="ocsimore_phrasing_link">HTML</a></h2><h1> Other tutorials: Miscellanous features</h1><h2><a href="mobile" class="ocsimore_phrasing_link">Mobile applications with Ocsigen</a></h2><h2><a href="custom-conf" class="ocsimore_phrasing_link">Custom configuration</a></h2><h2><a href="rest" class="ocsimore_phrasing_link">RESTful JSON API</a></h2><h2><a href="ocsipersist" class="ocsimore_phrasing_link">Persistent tables with Ocsipersist</a></h2><h2><a href="hash-password" class="ocsimore_phrasing_link">Protecting passwords</a></h2><h2><a href="macaque" class="ocsimore_phrasing_link">MaCaQue: SQL queries - Users</a></h2><h1> Improving Graffiti</h1><h2><a href="pictures" class="ocsimore_phrasing_link">Download pictures</a></h2><h2><a href="music" class="ocsimore_phrasing_link">Playing music</a></h2><h2><a href="reactivemediaplayer" class="ocsimore_phrasing_link">Reactive media player</a></h2><h1 class="howto"> HOW-TO</h1><h2> My first steps with Ocsigen</h2><h3><a href="how-to-make-hello-world-in-ocsigen" class="ocsimore_phrasing_link">How to make &quot;hello world&quot; in Ocsigen</a></h3><h3><a href="how-to-compile-my-ocsigen-pages" class="ocsimore_phrasing_link">How to compile my Ocsigen pages</a></h3><h3><a href="how-to-configure-and-launch-the-ocsigen-server" class="ocsimore_phrasing_link">How to configure and launch the Ocsigen Server</a></h3><h3><a href="how-does-a-page-s-source-code-look" class="ocsimore_phrasing_link">How does a client-server app source code look like?</a></h3><h2> How to put some elements in my page ?</h2><h3><a href="how-to-make-page-a-skeleton" class="ocsimore_phrasing_link">How to make a page skeleton</a></h3><h3><a href="how-to-use-get-parameters-or-parameters-in-the-url" class="ocsimore_phrasing_link">How to use GET parameters (parameters in the URL)</a></h3><h3><a href="how-to-add-css-stylesheet" class="ocsimore_phrasing_link">How to add CSS stylesheet</a></h3><h3><a href="how-to-add-a-javascript-script" class="ocsimore_phrasing_link">How to add a Javascript script</a></h3><h3><a href="how-to-add-a-div" class="ocsimore_phrasing_link">How to add a div</a></h3><h3><a href="how-to-add-a-list" class="ocsimore_phrasing_link">How to add lists in pages?</a></h3><h3><a href="how-to-add-an-image" class="ocsimore_phrasing_link">How to add an image</a></h3><h3><a href="how-to-write-titles-and-paragraphs" class="ocsimore_phrasing_link">How to write titles and paragraphs</a></h3><h3><a href="how-to-set-and-id-classes-or-other-attributes-to-html-elements" class="ocsimore_phrasing_link">How to set and id, classes or other attributes to HTML elements</a></h3><h3><a href="how-to-add-a-select-or-other-form-element" class="ocsimore_phrasing_link">How to add select (or other form element)</a></h3><h3><a href="how-to-insert-raw-form-elements-not-belonging-to-a-form-towards-a-service" class="ocsimore_phrasing_link">How to insert &quot;raw&quot; form elements (not belonging to a form towards a service)</a></h3><h3><a href="how-to-make-responsive-css" class="ocsimore_phrasing_link">How to make responsive CSS</a></h3><h2> Services</h2><h3><a href="how-to-do-links-to-other-pages" class="ocsimore_phrasing_link">How to do links to other pages</a></h3><h3><a href="how-to-write-forms" class="ocsimore_phrasing_link">How to write forms</a></h3><h3><a href="how-to-register-a-service-that-decides-itself-what-to-send" class="ocsimore_phrasing_link">How to register a service that decides itself what to send</a></h3><h3><a href="how-to-create-link-to-a-current-page-without-knowing-its-url" class="ocsimore_phrasing_link">How to create link to a current page (without knowing its URL)</a></h3><h3><a href="how-to-create-form-wizard-sequence-of-pages-depending-on-data-entered-on-previous-ones" class="ocsimore_phrasing_link">How to create form wizard (sequence of pages depending on data entered on previous ones)</a></h3><h3><a href="how-to-write-a-json-service" class="ocsimore_phrasing_link">How to write a JSON service</a></h3><h3><a href="how-to-send-file-download" class="ocsimore_phrasing_link">How to send a file (download)</a></h3><h3><a href="how-to-send-file-upload" class="ocsimore_phrasing_link">How to send a file (upload)</a></h3><h2> Js_of_ocaml</h2><h3><a href="how-to-attach-ocaml-values-to-dom-elements" class="ocsimore_phrasing_link">How to attach OCaml values to DOM elements</a></h3><h3><a href="how-to-know-whether-the-browser-window-has-the-focus-or-not" class="ocsimore_phrasing_link">How to know whether the browser window has the focus or not</a></h3><h3><a href="how-to-build-js-object" class="ocsimore_phrasing_link">How to build js object</a></h3><h3><a href="how-to-stop-default-behaviour-of-events" class="ocsimore_phrasing_link">How to stop default behaviour of events</a></h3><h3><a href="how-to-call-an-ocaml-function-from-js-code" class="ocsimore_phrasing_link">How to call an OCaml function from js code</a></h3><h2> Eliom client-server applications</h2><h3><a href="how-to-call-a-server-side-function-from-client-side" class="ocsimore_phrasing_link">How to call a server-side function from the client side</a></h3><h3><a href="how-to-make-the-client-side-program-get-an-html-element-from-the-server-and-insert-it-in-the-page" class="ocsimore_phrasing_link">How to make the client side program get an HTML element from the server and insert it in the page</a></h3><h3><a href="how-to-attach-ocaml-values-to-the-html-nodes-sent-to-the-client" class="ocsimore_phrasing_link">How to attach OCaml values to the HTML nodes sent to the client</a></h3><h3><a href="how-to-iterate-on-all-sessions-for-one-user-or-all-tabs" class="ocsimore_phrasing_link">How to iterate on all sessions for one user, or all tabs</a></h3><h3><a href="how-to-implement-a-notification-system" class="ocsimore_phrasing_link">How to implement a notification system</a></h3><h3><a href="how-to-send-a-file-to-server-without-stopping-the-client-process" class="ocsimore_phrasing_link">How to send a file to server without stopping the client process</a></h3><h3><a href="how-to-detect-channel-disconnection" class="ocsimore_phrasing_link">How to detect channel disconnection</a></h3><h3><a href="how-to-detect-on-client-side-that-the-server-side-state-for-the-process-is-closed" class="ocsimore_phrasing_link">How to detect on client side that the server side state for the process is closed</a></h3><h2> Eliom Server side</h2><h3><a href="how-do-i-create-a-cryptographically-safe-identifier" class="ocsimore_phrasing_link">How do I create a Cryptographically safe identifier</a></h3></nav></nav><article class="rightcol"><h1>Ocsigen from A to Z</h1><p>This page describes the main concept you need to master to become fully operational
with Ocsigen.
</p><p>It is highly recommended to generate your first Ocsigen Start app to see
running examples of all these concepts while reading this page.
</p><section class="docblock"><header><h2>OCaml</h2></header><p>This programming guide assumes you know the <em>OCaml</em> language.
Many resources and books are available online.</p></section><section class="docblock"><header><h2>Lwt</h2></header><p><em>Lwt</em> is a concurrent programming library for OCaml, initially written
by Jérôme Vouillon in 2001 for the
<a href="https://github.com/bcpierce00/unison" class="ocsimore_phrasing_link">Unison</a> file synchronizer.
It provides an alternative to the more usual preemptive threads approach
for programming concurrent applications, that avoids most problems of concurrent
data access and deadlocks.
It is used by Ocsigen Server and Eliom and has now become one of the
standard ways to implement concurrent applications in OCaml.
All your Web sites must be written in Lwt-compatible way!
</p><aside class="concept"><header><h5><span class="concept_prefix">Concept: </span>How it works</h5></header><p>Instead of calling blocking functions, like <span class="teletype"> Unix.sleep </span>
or <span class="teletype"> Unix.read </span>, that could block the entire program, replace them
by their cooperatives counterparts (<span class="teletype"> Lwt_unix.sleep</span>,
<span class="teletype"> Lwt_unix.read</span>, etc.). Instead of taking time to execute,
they always return immediately a <em>promise</em> of the result,
of type <span class="teletype">'a Lwt.t</span>. This type is abstract, and the only way
to use the result is to <em>bind</em> a function to the promise.
<span class="teletype">Lwt.bind p f</span> means: &quot;when promise <span class="teletype">p</span> is completed, give its result
to function <span class="teletype">f</span>&quot;.
</p><p>Syntax <span class="teletype">let%lwt x = p in e</span> is equivalent to <span class="teletype">Lwt.bind p (fun x -&gt; e)</span>
and makes it very easy to sequentialize computations without blocking the rest
of the program.</p></aside><p>Read more about Lwt in its <a href=".././../../lwt/" class="ocsimore_phrasing_link">user manual</a>.</p></section><section class="docblock"><header><h2>TyXML: typing HTML</h2></header><pre class=""><code class="language-ocaml translatable">open Eliom_content.Html.D</code></pre><pre class=""><code class="language-ocaml translatable">(html
  (head (title (txt &quot;&quot;)) [])
  (body [h1 ~a:[a_id &quot;toto&quot;; a_class [&quot;blah&quot;; &quot;blih&quot;]]
          [txt &quot;Hallo!&quot;]])))</code></pre><pre class=""><code class="language-ocaml translatable">img
  ~alt:&quot;blip&quot;
  ~src:(make_uri
         (Eliom_service.static_dir ())
         [&quot;dir&quot; ; &quot;image.jpg&quot;])
  ()</code></pre><aside class="concept"><header><h5><span class="concept_prefix">Concept: </span>How it works</h5></header></aside><p>Module <span class="teletype">Eliom_content.Html.F</span> will create a functional value representing
your nodes. On client side, calling <span class="teletype">Eliom_content.Html.To_dom.of_element</span>
on these nodes will create a new DOM node.
</p><p>Module <span class="teletype">Eliom_content.Html.D</span> will automatically insert an id in the
attributes of the node, to label a precise instance of the node in the DOM.
On client side, calling <span class="teletype">Eliom_content.Html.To_dom.of_element</span>
on these nodes will return the actual version of the nodes that are currently
in the page.
</p><p>In a client server Eliom app,
you probably always want to use <span class="teletype">Eliom_content.Html.D</span>
whenever you want to bind events on
an element (and more generally if you need to inject this element using <span class="teletype">~%</span>).</p></section><section class="docblock"><header><h2>Eliom: Services</h2></header><p>Page are generated by <em>services</em>.
</p><p>To create a service, call <span><a href=".././../../eliom/latest/api/Eliom_service#VALcreate">Eliom_service.create</a></span>.
For example, the following code defines a service at URL <span class="teletype">/foo</span>,
that will use GET HTTP method, and take one parameter of type string,
named <span class="teletype">&quot;myparam&quot;</span>.
</p><pre class="server" class=""><code class="language-ocaml translatable">let myservice =
  Eliom_service.create
    ~path:(Eliom_service.Path [&quot;foo&quot;])
    ~meth:(Eliom_service.Get (Eliom_parameter.string &quot;myparam&quot;))
    ()</code></pre><p>Then register an OCaml function as handler on this service:
</p><h3>Outputs</h3><div id="servicetable"><table><tr><th class="row"><span><a href=".././../../eliom/latest/api/Eliom_registration.Html5">Html5</a></span></th><td colspan="3">Typed HTML5 pages</td></tr><tr><th class="row"><span><a href=".././../../eliom/latest/api/Eliom_registration.ELIOM_APPL">App</a></span></th><td colspan="3">HTML5 pages belonging to an Eliom client/server application (functor)</td></tr><tr><th class="row"><span><a href=".././../../eliom/latest/api/Eliom_registration.Flow5">Flow5</a></span></th><td colspan="3">Portions of HTML5 pages.</td></tr><tr><th class="row"><span><a href=".././../../eliom/latest/api/Eliom_registration.Action">Action</a></span></th><td colspan="3">Actions (server side effects) with or without reloading the page</td></tr><tr><th class="row"><span><a href=".././../../eliom/latest/api/Eliom_registration.File">Files</a></span></th><td colspan="3">Files</td></tr><tr><th class="row"><span><a href=".././../../eliom/latest/api/Eliom_registration.Ocaml">Ocaml</a></span></th><td colspan="3">OCaml value to be sent to a client side OCaml program</td></tr><tr><th class="row"><span><a href=".././../../eliom/latest/api/Eliom_registration.String">String</a></span></th><td colspan="3">Any OCaml string (array of byte)</td></tr><tr><th class="row"><span><a href=".././../../eliom/latest/api/Eliom_registration.Redirection">Redirection</a></span></th><td colspan="3">Redirection to another service</td></tr><tr><th class="row"><span><a href=".././../../eliom/latest/api/Eliom_registration.Any">Any</a></span></th><td colspan="3">To be used to make the service chose what it sends</td></tr><tr><th class="row"><span><a href=".././../../eliom/latest/api/Eliom_registration.Customize">Customize</a></span></th><td colspan="3">Defining your own registration module (functor)</td></tr></table></div><h3>Parameters</h3><p>Module <span><a href=".././../../eliom/latest/api/Eliom_parameter">Eliom_parameter</a></span>
is used to describe the type of service parameters.
</p><p>Examples:
</p><pre class=""><code class="language-ocaml translatable">Eliom_parameter.(int &quot;i&quot; ** (string &quot;s&quot; ** bool &quot;b&quot;))
   (* /path?i=42&amp;s=toto&amp;b=on *)

Eliom_parameter.(int &quot;i&quot; ** opt (string &quot;s&quot;))
   (* An integer named i, and an optional string named s *)

Eliom_parameter.(int &quot;i&quot; ** any)
   (* An integer named i, and any other parameters, as an association list
      of type (string * string) list *)

Eliom_parameter.(set string &quot;s&quot;)
   (* /path?s=toto&amp;s=titi&amp;s=bobo *)

Eliom_parameter.(list &quot;l&quot; (int &quot;i&quot;))
   (* /path?l[0]=11&amp;l[1]=2&amp;l[2]=42 *)

Eliom_parameter.(suffix (int &quot;year&quot; ** int &quot;month&quot;))
   (* /path/2012/09 *)</code></pre><h3>POST services</h3><h3>Other types of services</h3><h3>Predefined services</h3><p><span><a href=".././../../eliom/latest/api/Eliom_service#VALexternal_service">Eliom_service.external_service</a></span> to create links of form towards external Web sites
</p><p><span><a href=".././../../eliom/latest/api/Eliom_service#VALstatic_dir">Eliom_service.static_dir</a></span> to create links towards static files.
<span><a href=".././../../eliom/latest/api/Eliom_service#VALvoid_coservice'">Eliom_service.void_coservice'</a></span> to create links or forms towards the current URL ...</p></section><section class="docblock"><header><h2>Forms and links</h2></header><p>Functions <span class="teletype">Eliom_content.Html.F.a</span> and <span class="teletype">D.a</span>
create typed links to services with their parameters.
For example, if <span class="teletype">home_service</span> expects no parameter
and <span class="teletype">other_service</span> expects a string:
</p><pre class=""><code class="language-ocaml translatable">Eliom_content.Html.D.a ~service:home_service [txt &quot;Home&quot;] ()
Eliom_content.Html.D.a ~service:other_service [txt &quot;Other&quot;] &quot;hello&quot;</code></pre><p>Modules <span class="teletype">Eliom_content.Html.F.Raw</span> and <span class="teletype">D.Raw</span> define the links
and form elements with the usual typed interface from TyXML.
Use this for example if you want to manipulate the form contents
from client side functions.
</p><p>Modules <span class="teletype">Eliom_content.Html.F</span> and <span class="teletype">D</span> define a typed interface
for form elements. Use this for links (see above), or if you program traditional
server-side Web interaction to check that your form correspond to the
service. Example:
</p><pre class=""><code class="language-ocaml translatable">open Eliom_content.Html.D</code></pre><pre class=""><code class="language-ocaml translatable">post_form
 ~service:connection_service
   (fun (name, password) -&gt;
     [fieldset
       [label ~a:[a_for name] [txt &quot;Name: &quot;];
        string_input ~input_type:`Text ~name:name ();
        br ();
        string_input
          ~a:[a_placeholder &quot;Password&quot;]
          ~input_type:`Password
          ~name:password
          ();
        br ();
        string_input ~input_type:`Submit ~value:&quot;Connect&quot; ()
      ]]) ()</code></pre></section><section class="docblock"><header><h2>Js_of_ocaml</h2></header><p><em>Js_of_ocaml</em> is a compiler of OCaml bytecode to JavaScript,
allowing to run Ocaml programs in a Web browser.
Its key features are the following:
</p><ul><li> The whole language, and most of the standard library are supported.
</li><li> The compiler is easy to install: it depends only on Findlib and Lwt.
</li><li> The generated code which is independant of Eliom and the Ocsigen Server. You can use it with any Web server.
</li><li> You can use a standard installation of OCaml to compile your programs. In particular, you do not have to recompile a library to use it with Js_of_ocaml. You just have to link your program with a specific library to interface with the browser API.
</li></ul><table><tr><td><span class="teletype">obj##m : u</span></td><td>when <span class="teletype">obj : &lt;m : u prop&gt; Js.t</span></td></tr><tr><td><span class="teletype">obj##m &lt;- e : unit</span></td><td>when <span class="teletype">obj : &lt;m : u prop&gt; Js.t</span> and <span class="teletype">e:u</span></td></tr><tr><td><span class="teletype">obj##m(e_1, ..., e_n) : u</span></td><td>when <span class="teletype">obj : &lt;m : t_1 -&gt; ... -&gt; t_n -&gt; u meth; ..&gt; Js.t</span> and <span class="teletype">e_i : t_i</span></td></tr><tr><td><span class="teletype">jsnew constr (e1, ..., en) : u</span></td><td>when <span class="teletype">constr : (t_1 -&gt; ... -&gt; t_n -&gt; u Js.t) Js.constr</span> and <span class="teletype">e_i : t_i</span></td></tr></table></section><section class="docblock"><header><h2>Eliom: client-server apps</h2></header><p>Eliom transforms OCaml into a multi-tier language, allowing one to
implement (both the server and client parts of) a distributed application
entirely in OCaml, as a single program.
This simplifies the communication between server and client.
</p><p>Page can be generated either on the server or the client.
The first HTTP request usually returns a server-side generated HTML page
(thus indexable by seach engine). But subsequent page generations are done
by the client, for performance reasons.
In a mobile app, all pages usually are generated on the client.
</p><p>Client side features can be mixed with traditional Web interaction
(links, forms, bookmarks, back button ...)
One of the key feature of Eliom is that it allows
one to mix commonplace Web interactions (URLs, forms, links,
bookmarks, back button) with dynamic client side features. In
particular, the client-side program <strong>does not stop</strong> when the user
clicks a link, sends a form, or presses the back button–yet the user
still can save bookmarks on pages!  This opens up a wide field of new
possibilities, and should facilitate the emergence of new kinds of Web
applications.
</p><h3>Sections</h3><table><tr><td><span class="teletype"> let%shared ... = ... </span></td><td>Code to be included in both the client and server apps</td></tr><tr><td><span class="teletype"> let%client ... = ... </span></td><td>Code to be included in client app only</td></tr><tr><td><span class="teletype"> let%server ... = ... </span></td><td>Code to be included in server app only</td></tr></table><p>Same for <span class="teletype"> module%shared </span>, <span class="teletype"> open%shared </span>, <span class="teletype"> type%shared </span> etc.
</p><h3>Client values</h3><p>Client values can be declared within server or shared code as
<span class="teletype"> [%client[ (&lt;value&gt; : &lt;type&gt;) ] </span>.
The type annotation is almost always required.
</p><p>If this section is reached while generating a page on server side,
the client-side code will be executed once the page is displayed.
If this section is reached while generating a page on client side,
the client-side code will be executed immediately.
</p><p><a href="tutowidgets" class="ocsimore_phrasing_link">This tutorial</a> shows how client values can be manipulated
on client side.
</p><h3>Injections</h3><p>Server side variables can be accessed (injected) in client code by prefixing
them with <span class="teletype">~%</span> as in this example:
</p><pre class=""><code class="language-ocaml translatable">let%server ... =
  ... let x = ... in [%client[ ... ~%x ... ]] ...
}}</code></pre><p>The value will automatically be sent with the page by Eliom.
</p><h3>Example</h3><p>This section shows a typical example of client-server code.
</p><pre class="client" class=""><code class="language-ocaml translatable">open%client Js_of_ocaml
open%client Js_of_ocaml_lwt
open%client Eliom_content.Html</code></pre><pre class="shared" class=""><code class="language-ocaml translatable">open%shared Eliom_content.Html.F</code></pre><pre class="server" class=""><code class="language-ocaml translatable">let%server g () = Lwt.return (string_of_int (10000 + Random.int 1000))</code></pre><pre class=""><code class="language-ocaml translatable">let%shared () =
  Bs_base.App.register ~service:Bs_services.toto (fun s () -&gt;
      let aa = string_of_int (Random.int 1000) in
      let _ = [%client (print_endline ~%aa : unit)] in
      let b = Eliom_content.Html.D.button [txt aa] in
      let _ =
        [%client
          (Lwt.async (fun () -&gt;
               Lwt_js_events.clicks (To_dom.of_element ~%b) (fun _ _ -&gt;
                   Dom_html.window##alert (Js.string (~%aa));
                   Lwt.return_unit))
            : unit)]
      in
      Lwt.return (html (head (title (txt s)) []) (body [h1 [txt s]; b])))</code></pre><h3>Calling server side functions from the client</h3></section><section class="docblock"><header><h2>Sessions</h2></header><p>Session data is saved in <em>Eliom references</em>.
</p><pre class=""><code class="language-ocaml translatable">let count_ref =
  Eliom_reference.eref ~scope:Eliom_common.session 0</code></pre><pre class=""><code class="language-ocaml translatable">lwt count = Eliom_reference.get count_ref in
Eliom_reference.set count_ref (count + 1)</code></pre><p>You can choose a reference to be persistant (value saved on hard drive) or volatile (in memory).
</p><h3>Scopes</h3><p>Sessions are relative to a browser, and implemented using browser cookies.
But Eliom allows to create Eliom references with other <em>scopes</em> than session:
</p><table><tr><td><span><a href=".././../../eliom/latest/api/Eliom_common#VALglobal_scope">global_scope</a></span></td><td>Global value for all the app</td></tr><tr><td><span><a href=".././../../eliom/latest/api/Eliom_common#VALdefault_group_scope">default_group_scope</a></span></td><td>Value for a group of sessions. For example Ocsigen Start defines a group of session for each user, making it possible to save server side data for all sessions of a user.</td></tr><tr><td><span><a href=".././../../eliom/latest/api/Eliom_common#VALdefault_session_scope">default_session_scope</a></span></td><td>The usual session data, based on browser cookies</td></tr><tr><td><span><a href=".././../../eliom/latest/api/Eliom_common#VALdefault_process_scope">default_process_scope</a></span></td><td>Server side data for a given client-side process (a tab of the browser or a mobile app).</td></tr></table><p>Applications based on Ocsigen Start use these scopes for user management.
Session or client process data are discarded when a user logs in or out.
But Ocsigen Start also defines scopes
<span><a href=".././../../ocsigen-start/latest/api/Os_session#VALuser_indep_session_scope">Os_session.user_indep_session_scope</a></span>
and
<span><a href=".././../../ocsigen-start/latest/api/Os_session#VALuser_indep_process_scope">Os_session.user_indep_process_scope</a></span>
which remain even if user logs in or out.</p></section><section class="docblock"><header><h2>Browser events</h2></header><p>Attributes like <span class="teletype">a_onclick</span> in module <span class="teletype">Eliom_content.Html.D</span> or <span class="teletype">F</span>
take a client side function as parameter:
</p><pre class="shared" class=""><code class="language-ocaml translatable">div ~a:[a_onclick [%client fun ev -&gt; ... ]] [ ... ]</code></pre><p>Module <span class="teletype">Lwt_js_events</span> of Js_of_ocaml defines a way to bind browser events
using Lwt promises.
</p><p>For example,
the following code will wait for a click on element <span class="teletype">d</span> before continuing:
</p><pre class="client" class=""><code class="language-ocaml translatable">let%lwt ev = Lwt_js_events.click (Eliom_content.Html.To_dom.of_element ~%d) in
...</code></pre><p>Functions like <span class="teletype">Lwt_js_events.clicks</span> or <span class="teletype">Lwt_js_events.mousedowns</span>
will call the function given as second parameter
for each <span class="teletype">click</span> or <span class="teletype">mousedown</span> events
on their first parameter.
</p><p>For example, the following code (extracted from <a href="graffiti" class="ocsimore_phrasing_link">this tutorial</a>)
will wait for all <span class="teletype">mousedown</span> events on the canvas,
then for each <span class="teletype">mousemove</span> event on the document,
it will call function <span class="teletype">f</span>, until <span class="teletype">mouseup</span> is triggered.
(See <span><a href=".././../../lwt/latest/api/Lwt#VALpick">Lwt.pick</a></span>)
</p><pre class="client" class=""><code class="language-ocaml translatable">let open Lwt_js_events in
Lwt.async (mousedowns
            (Eliom_content.Html.To_dom.of_element ~%canvas)
            (fun ev _ -&gt;
               Lwt.pick [mousemoves Dom_html.document f;
	                 mouseup Dom_html.document]))</code></pre></section><section class="docblock"><header><h2>Ocsigen Toolkit</h2></header></section><section class="docblock"><header><h2>Ocsigen Start</h2></header><p><em>Ocsigen-start</em> is a library and a template of Eliom application,
with many common features like
user registration, login box, notification system, etc.</p></section><section class="docblock"><header><h2>Database access</h2></header></section><section class="docblock"><header><h2>Server to client communication</h2></header><p>Modules
<span><a href=".././../../eliom/latest/api/Eliom_notif">Eliom_notif</a></span>
and
<span><a href=".././../../ocsigen-start/latest/api/Os_notif">Os_notif</a></span>
define the simplest interface to enable server to client communication
(the second one being aware of Ocsigen Start users).
</p><aside class="concept"><header><h5><span class="concept_prefix">Concept: </span>How it works</h5></header><p>Say you want to receive the messages for one or more chat rooms.
First, define your notification module:
</p><pre class="server" class=""><code class="language-ocaml translatable">module%server Notif = Os_notif.Make_Simple (struct
  type key = int64 (* the chat room ids *)
  type notification = string (* the type of messages *)
end)</code></pre><p>If you want to be notified when there a new message in a chat room, call function
<span class="teletype">Notif.listen</span> (server side) on the chat room id.
</p><p>If you want to send a message in a chat room, call function
<span class="teletype">Notif.notify</span> (server side) with the chat room id and the message as parameter.
</p><p>On client side, <span class="teletype">~%(Notif.client_ev ())</span> is a React event of type
<span class="teletype">(key, notif) React.E.t</span>. Use it to receive the messages.</p></aside><p>Eliom has other communication modules:
</p><ul><li> <span><a href=".././../../eliom/latest/api/Eliom_bus">Eliom_bus</a></span> defines a communication bus,
that you can use to share information with other client processes
(see an example <a href="application" class="ocsimore_phrasing_link">here</a>).
</li><li> <span><a href=".././../../eliom/latest/api/Eliom_react">Eliom_react</a></span> defines client-server React events.
</li><li> <span><a href=".././../../eliom/latest/api/Eliom_comet">Eliom_comet</a></span> is lower level interface for
server to client communication.</li></ul></section><section class="docblock"><header><h2>Reactive programming</h2></header><p>Eliom also provides reactive pages (generated on server or client), an
advanced session mechanism, facilities for server to client
communication, support for continuation-based Web programming, etc.</p></section><section class="docblock"><header><h2>Mobile apps</h2></header><p>Applications can run on any Web browser or mobile device (iOS, Android, ...),
thus eliminating the need for one custom version per platform.</p></section><section class="docblock"><header><h2>Ocsigen Server</h2></header><p><em>Ocsigen Server</em> is a full featured Web server written in modular way.
It implements most features of the HTTP protocol, and has a powerful
extension mechanism that make easy to plug your own OCaml modules
for generating pages. Many extensions are already written:
</p><dl><dt><span><a href=".././../../ocsigenserver/latest/manual/staticmod">Staticmod</a></span>
</dt><dd>    to serve static files.
</dd><dt><a href=".././../../eliom/" class="ocsimore_phrasing_link">Eliom</a>
</dt><dd>    to create reliable client/server Web applications
or Web sites in OCaml using advanced high level concepts.
</dd><dt><span><a href=".././../../ocsigenserver/latest/manual/extendconfiguration">Extendconfiguration</a></span>
</dt><dd>    allows for more options in the configuration file.
</dd><dt><span><a href=".././../../ocsigenserver/latest/manual/accesscontrol">Accesscontrol</a></span>
</dt><dd>    allows to restrict the access to the sites from the config file (to request coming from a subnet, containing some headers, etc.).
</dd><dt><span><a href=".././../../ocsigenserver/latest/manual/authbasic">Authbasic</a></span>
</dt><dd>    allows to restrict the access to the sites from the config file using Basic HTTP Authentication.
</dd><dt><span><a href=".././../../ocsigenserver/latest/manual/cgimod">CGImod</a></span>
</dt><dd>    serves CGI scripts. It may also be used to serve PHP through CGI.
</dd><dt><span><a href=".././../../ocsigenserver/latest/manual/deflatemod">Deflatemod</a></span>
</dt><dd>    used to compress data before sending to the client.
</dd><dt><span><a href=".././../../ocsigenserver/latest/manual/redirectmod">Redirectmod</a></span>
</dt><dd>    sets redirections towards other Web sites from the configuration file.
</dd><dt><span><a href=".././../../ocsigenserver/latest/manual/revproxy">Revproxy</a></span>
</dt><dd>    a reverse proxy for Ocsigen Server.
It allows to ask another server to handle the request.
</dd><dt><span><a href=".././../../ocsigenserver/latest/manual/rewritemod">Rewritemod</a></span>
</dt><dd>    changes in incoming requests before sending them to other extensions.
</dd><dt><span><a href=".././../../ocsigenserver/latest/manual/outputfilter">Outputfilter</a></span>
</dt><dd>    rewrites some parts of the output before sending it to the client.
</dd><dt><span><a href=".././../../ocsigenserver/latest/manual/userconf">Userconf</a></span>
</dt><dd>    allows users to have their own configuration files.
</dd><dt><span><a href=".././../../ocsigenserver/latest/manual/comet">Comet</a></span>
</dt><dd>    facilitates server to client communications.
</dd></dl><p>Ocsigen Server has a <span><a href=".././../../ocsigenserver/latest/manual/config">sophisticated configuration</a></span> file mechanism allowing
complex configurations of sites.</p></section></article></div></div></body></html>
